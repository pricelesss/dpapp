<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta charset="UTF-8">
<style>
  body{
    background-color: #000;
    overflow: scroll;
  }
  .btn{
    display: block;
    background-color: #f63;
    color:#fff;
    text-decoration: none;
    text-align: center;
    font-size: 16px;
    padding: 10px 5px;
    margin: 10px 5px;
    border-radius: 5px
  }
  .log-panel{
    width: 100%;
    position: fixed;
    top: 0px;
    left: 0px;
    background: #6CD786;
    color: #fff;
    z-index: 1;
  }
  .log-panel .content{
    overflow: hidden;
    -webkit-transition: height .2s linear;
  }
  .log-panel p{
    padding: 10px;
    margin: 0;
  }

  .shadow-content{
    position: absolute;
    visibility: hidden;
    width: 100%;
  }

  .shadow-content p{
    padding: 10px;
    margin: 0
  }

</style>
</head>

<body>

  <a class="btn" href="javascript:location.reload()">刷新</a>
  <a class="btn" id="getUA" href="javascript:;">获取客户端环境信息</a>
  <a class="btn" id="callMulti" href="javascript:;">连续方法调用</a>
  <a class="btn" id="getUserInfo" href="javascript:;">获取用户信息</a>
  <a class="btn" id="getLocation" href="javascript:;">获取地理位置</a>
  <a class="btn" id="getNetworkType" href="javascript:;">获取网络状态</a>
  <a class="btn" id="getContactList" href="javascript:;">获取联系人列表</a>
  <!-- <a class="btn" id="getCX" href="javascript:;">获取诚信数据</a> -->
  <a class="btn" id="ajax" href="javascript:;">Ajax(.bin)</a>
  <a class="btn" id="ajax-json" href="javascript:;">Ajax(.json)</a>
  <a class="btn" id="ga" href="javascript:;">ga</a>

  <a class="btn" id="uploadImage" href="javascript:;">上传图片</a>
  <a class="btn" id="downloadImage" href="javascript:;">下载图片</a>
  <a class="btn" id="closeWindow" href="javascript:;">关闭webview</a>
  <a class="btn" id="pay" href="javascript:;">第三方支付</a>
  <a class="btn" id="share" href="javascript:;">分享</a>
  <a class="btn" id="sendSMS" href="javascript:;">发送短信</a>


  <a class="btn" id="subscribe" href="javascript:;">订阅消息</a>
  <a class="btn" id="unsubscribe" href="javascript:;">取消订阅</a>
  <a class="btn" id="publish" href="javascript:;">广播消息</a>


  <a class="btn" id="setTitle" href="javascript:;">设置标题</a>
  <a class="btn" id="setRLButton" href="javascript:;">设置RL按钮</a>
  <a class="btn" id="setRRButton" href="javascript:;">设置RR按钮</a>
  <a class="btn" id="setSearchButton" href="javascript:;">设置RR搜索按钮</a>

  <a class="btn" id="login" href="javascript:;">登录</a>

<script src="./dest/standalone.js?t=918317289317293112"></script>

<script>

  var success = function(ret){
    alert(JSON.stringify(ret));
  };
  var fail = function(ret){
  }
  var defaultConfig = {
    success: success,
    fail: fail
  };
  var args = {
    getUserInfo: defaultConfig,
    getLocation: defaultConfig,
    getNetworkType: defaultConfig,
    getContactList: defaultConfig,
    // getCX: defaultConfig,
    ajax: {
      url: "http://m.api.dianping.com/indextabicon.bin?cityid=1&version=7.0.1",
      method: "get",
      success: success
    },
    ga: {
      success: success
    },
    uploadImage: {
      uploadUrl: "", // 上传图片调用的mapi接口的url
      compressFactor: 1024, // 可选，上传图片压缩到多少尺寸以下，单位为K
      maxNum: 5, // 需填写，默认为0
      extra: {}, // 业务参数
      success: success
    },
    downloadImage: {
      imageUrl: "http://www.dpfile.com/toevent/img/16d05c85a71b135edc39d197273746d6.png",
      success: success
    },
    closeWindow: defaultConfig,
    // pay: {
    //  success: success
    // },
    share: {
      title:"分享标题",
      desc:"分享描述",
      content: "覆盖内容",
      feed: [DPApp.Share.WECHAT_FRIENDS, DPApp.Share.WECHAT_TIMELINE, DPApp.Share.WEIBO],
      image:"http://www.dpfile.com/toevent/img/16d05c85a71b135edc39d197273746d6.png",
      url:"http://m.dianping.com",
      success: success
    },
    sendSMS: {
      recipients: 13987654321,
      content: "短信内容",
      success: success
    },
    subscribe: {
      action: "loginSuccess",
      handle: function(){
        alert('用户已登录');
      }
    },
    unsubscribe: {
      action: "loginSuccess"
    },
    publish: {
      action: "loginSuccess"
    },
    setTitle: {
      title: "新标题",
      success: success
    },
    setRLButton: {
      text: "默认"
    },
    setRRButton: {
      text: "分享",
      icon: "H5_Share",
      success: success,
      handle: function(){
        DPApp.share({
          title: document.title,
          desc: document.title,
          image: 'http://i2.s1.dpfile.com/pc/mc/b99de9c6e32d86ba2866380092f1f7f2(353c221)/thumb.jpg',
          url: location.href,
          success: function(){
            alert('分享成功');
          }
        });
      }
    }
  }

  DPApp.config({
    debug: false
  });


  $('login').onclick = function(){
    try{
      location.href = "dianping://login";
    }catch(e){}
  }

  function $(id){return document.getElementById(id);}

  var models = {
    "0x6d3b": {
        "__name": "WeiXinCardList",
        "0x249a": "list",
        "0x177d": "recordCount",
        "0xaa64": "startIndex",
        "0xf0b": "isEnd",
        "0x5703": "nextStartIndex",
        "0xa465": "emptyMsg",
        "0x2d87": "queryID"
    },
    "0x390a": {
        "__name": "WeiXinCardInfo",
        "0x40ec": "rid",
        "0x10ed": "cardExt",
        "0x9b8b": "cardId"
    },
    "0x3820": {
        "__name": "PaymentInfo",
        "0x9a6d": "advanceOrderId",
        "0xb214": "retryCount",
        "0xb96b": "intervalTime",
        "0x4f16": "discountList",
        "0x49bd": "balance",
        "0x6dd9": "paymentType",
        "0x91b": "uid",
        "0x73ad": "flag",
        "0x5886": "alertMsg"
    },
    "0x5886": {
        "__name": "AlertMsg",
        "0x913b": "actionList",
        "0x8d": "statusCode",
        "0x36e9": "title",
        "0x57b6": "content",
        "0xb0bb": "icon",
        "0x73ad": "flag",
        "0x63ea": "data"
    },
    "0xc99f": {
        "__name": "ResultAction",
        "0x372": "type",
        "0xee8f": "name",
        "0x57b6": "content"
    },
    "0xd6df": {
        "__name": "Pair",
        "0x91b": "uid",
        "0xee8f": "name",
        "0x372": "type"
    },
    "0xcd43": {
        "__name": "Discount",
        "0x91b": "uid",
        "0x36e9": "title",
        "0x63ee": "date",
        "0xc5b5": "price",
        "0x48af": "beginDate",
        "0x2574": "addDate",
        "0x57b6": "content",
        "0xa77e": "useLimit",
        "0x2a2a": "expired"
    },
    "0x6389": {
        "__name": "SuccessMsg",
        "0x8d": "statusCode",
        "0x36e9": "title",
        "0x57b6": "content",
        "0xb0bb": "icon",
        "0x73ad": "flag",
        "0x63ea": "data"
    },
    "0x93a0": {
        "__name": "Order",
        "0xee82": "refundTip",
        "0x4a7b": "defaultReceiveDate",
        "0xc3d5": "shipmentStatus",
        "0xbf36": "refundHints",
        "0x91b": "uid",
        "0x36e9": "title",
        "0x630b": "count",
        "0x4a8a": "photo",
        "0xc5b5": "price",
        "0x69fa": "statusMemo",
        "0xc6ca": "time",
        "0x268d": "extraTitle",
        "0xa7f4": "extra",
        "0x72": "unitPrice",
        "0x30a9": "shipment",
        "0xecea": "logisticsInfo",
        "0x6fa3": "dealType",
        "0x2820": "status",
        "0x6777": "totalPrice",
        "0x6b1f": "deliveryType",
        "0xcd43": "discount",
        "0x4f16": "discountList",
        "0xb4fb": "delivery",
        "0xe649": "invoiceTitle",
        "0xffc": "privilege",
        "0x5b24": "refundStatus",
        "0x7cf5": "relativeDeal",
        "0xab88": "canDelete",
        "0xcd20": "couponList",
        "0x95df": "shareList",
        "0x4dfa": "buyInfo",
        "0xefdb": "displayBuyInfoOnSuccess"
    },
    "0x5b7d": {
        "__name": "Share",
        "0x36e9": "title",
        "0x4d4e": "url",
        "0xeef0": "iconUrl",
        "0x372": "type",
        "0x3367": "num",
        "0x9c17": "shareBannerMsg",
        "0x8c59": "shareBannerImg",
        "0xd2d0": "shareBannerButtonImg",
        "0x94c7": "shareMsg",
        "0xe401": "shareImg"
    },
    "0xbce1": {
        "__name": "Coupon",
        "0x9239": "usageHint",
        "0x91b": "uid",
        "0x36e9": "title",
        "0x8a1": "isExpired",
        "0x3729": "isUsed",
        "0x63ee": "date",
        "0x222d": "code",
        "0x5795": "regionName",
        "0x7cf5": "relativeDeal",
        "0x97ac": "orderId",
        "0xca0f": "relevantPass",
        "0x5d30": "relevantShop",
        "0xd689": "isMemberCard",
        "0xfd90": "relativeCard",
        "0x471e": "dealSelectId",
        "0x2820": "status",
        "0x8b6": "refundInfo"
    },
    "0xf49": {
        "__name": "ReceiptRefundInfo",
        "0xba2d": "latestRefund",
        "0x4967": "amount",
        "0xbe4a": "receiptList",
        "0x50b2": "receiptNum",
        "0x643f": "refundToAccount",
        "0xe68a": "process",
        "0xa5d4": "processItems"
    },
    "0x8974": {
        "__name": "ProcessItem",
        "0x811b": "isWarning",
        "0x36e9": "title",
        "0x57b6": "content",
        "0x63ee": "date",
        "0x5cbe": "isFinished"
    },
    "0xfd90": {
        "__name": "RelativeCard",
        "0x9bab": "cardID",
        "0x4eea": "productID",
        "0x36e9": "title",
        "0x9c6d": "endDate",
        "0x9b11": "cardNO",
        "0x49bd": "balance"
    },
    "0x4f31": {
        "__name": "Shop",
        "0xea82": "starTips",
        "0xd3a7": "hasPay",
        "0xd479": "matchText",
        "0x5801": "distanceText",
        "0x8846": "fullShopName",
        "0x4485": "branchCounts",
        "0x3096": "isAdShop",
        "0x21bb": "hotelPromoList",
        "0xc7ce": "source",
        "0x5a9c": "reviewCount",
        "0x91b": "uid",
        "0xee8f": "name",
        "0x881b": "branchName",
        "0x2efc": "altName",
        "0xbeb7": "shopPower",
        "0x3835": "shopType",
        "0xeb1c": "avgPrice",
        "0x454b": "priceText",
        "0xa7b4": "cityID",
        "0x415": "phoneNo",
        "0x2d04": "address",
        "0x41db": "crossRoad",
        "0xbe8a": "latitude",
        "0x562d": "longitude",
        "0x9ea0": "categoryID",
        "0x73f9": "categoryName",
        "0x7d9b": "regionID",
        "0x5795": "regionName",
        "0xdc73": "promo",
        "0xcb9a": "promos",
        "0xef2f": "card",
        "0x94ec": "defaultPic",
        "0xecb6": "score1",
        "0x1349": "score2",
        "0x1348": "score3",
        "0x7456": "scoreRatio1",
        "0x7457": "scoreRatio2",
        "0x7454": "scoreRatio3",
        "0x88e8": "scoreText",
        "0xa8af": "dishTags",
        "0xbc7e": "writeUp",
        "0xa7f4": "extra",
        "0x9eb3": "campaign",
        "0xa28a": "deals",
        "0x870f": "groupID",
        "0xd1c9": "branchIDs",
        "0x7217": "checkInServerVerify",
        "0x2820": "status",
        "0x45dd": "isLandMark",
        "0x7ee": "landMarkId",
        "0x1b94": "floorNum",
        "0xf426": "floorLabel",
        "0x365f": "landmarkName",
        "0x1065": "landmarkShopID",
        "0x6886": "coordX",
        "0x6881": "coordY",
        "0xa69c": "polygon",
        "0x1606": "mCStatus",
        "0xc8e1": "authorityLabel",
        "0x34b2": "authorityLabelType",
        "0xcf04": "isRateFromDP",
        "0xe58b": "isDishMenu",
        "0x6d9d": "shopView",
        "0x25a8": "announce",
        "0x8fd1": "shopMemberCardID",
        "0x6a4d": "shopPhotoCategory",
        "0xa4a4": "cooperationInfo",
        "0x79ca": "recommends",
        "0xd8bc": "recommendIcon",
        "0x9889": "tourist",
        "0xed02": "commendReason",
        "0xac65": "picCount",
        "0x8d29": "phoneNos",
        "0x3229": "ticketBookable",
        "0x865": "publicTransit",
        "0x52d2": "isNewShop",
        "0xae5d": "hasSeeAlsoShops",
        "0x835c": "hotelBooking",
        "0x7f2": "weddingBookable",
        "0xfd5": "weddingTips",
        "0x37a6": "movieBookable",
        "0x30e5": "scoreEx1",
        "0x30e4": "scoreEx2",
        "0x30e7": "scoreEx3",
        "0x65aa": "storeCardGroupList",
        "0x8963": "hotelPromoTag",
        "0x8d9": "hasTakeaway",
        "0x180d": "oriLatitude",
        "0x6ee2": "oriLongitude",
        "0xd288": "likedActivity",
        "0xc5b5": "price",
        "0x9e5c": "hasMOPay",
        "0x31de": "hasPromo",
        "0xe4ac": "extraJson",
        "0x5271": "districtName",
        "0xd2ef": "isHotelFull",
        "0x9e45": "hotelDealList",
        "0x7608": "otaHotelPriceList",
        "0x69d4": "marketPrice",
        "0x991": "hasDeals",
        "0x460d": "shopPromos",
        "0x7945": "voteTotal",
        "0x203f": "hotelJson",
        "0xecbf": "bookable",
        "0x4992": "shopTotalSales"
    },
    "0x7ea0": {
        "__name": "ShopPromo",
        "0x91b": "uid",
        "0x36e9": "title",
        "0x7291": "desc",
        "0x2820": "status",
        "0x477b": "tag",
        "0xc77f": "tips"
    },
    "0x85ff": {
        "__name": "DefaultTip",
        "0x372": "type",
        "0x1a53": "defaultPayTips"
    },
    "0x96f6": {
        "__name": "HotelDetail",
        "0x7598": "otaID",
        "0xf3ce": "oTARefundList",
        "0xdf8e": "oTAPromoList",
        "0xee8f": "name",
        "0x4d4e": "url",
        "0xd384": "hotelExtInfo",
        "0xc5b5": "price",
        "0x454b": "priceText",
        "0x19d9": "tagList",
        "0x65ff": "campaignList"
    },
    "0xa919": {
        "__name": "HotelCampaign",
        "0x36e9": "title",
        "0xf786": "isHighlight"
    },
    "0x3f81": {
        "__name": "HotelBookingTag",
        "0x372": "type",
        "0x36e9": "title"
    },
    "0xd288": {
        "__name": "LikedActivity",
        "0x36e9": "title",
        "0x8764": "keyword",
        "0xec27": "images",
        "0x4d4e": "url"
    },
    "0xef2d": {
        "__name": "StoreCardGroup",
        "0x36e9": "title",
        "0xa82d": "iDList"
    },
    "0xcf40": {
        "__name": "TouristInfo",
        "0x79ca": "recommends",
        "0xd8bc": "recommendIcon",
        "0x6d34": "searchCategory",
        "0x991d": "newPage",
        "0xd885": "isHotel"
    },
    "0x6a4d": {
        "__name": "ShopPhotoCategory",
        "0x630b": "count",
        "0xee8f": "name",
        "0x372": "type",
        "0x5124": "subCategoryList"
    },
    "0x1606": {
        "__name": "MCStatus",
        "0xeea9": "isMCShop",
        "0xf1ab": "isMCUser",
        "0x39db": "memberCardID",
        "0xdcc4": "memberCardDesc",
        "0xddf0": "cardLevel",
        "0xcc5": "userLevel",
        "0x34da": "thirdPartyType",
        "0x7b3c": "navigateUrl"
    },
    "0x4d0b": {
        "__name": "DealList",
        "0xba4b": "shopAggLimit",
        "0xc0a5": "moreUrl",
        "0x249a": "list",
        "0xefb4": "revision",
        "0x243e": "link",
        "0xf64f": "buyLink",
        "0x432c": "selectLink",
        "0xb102": "detailLink",
        "0x58ce": "regionNavs",
        "0x72de": "categoryNavs",
        "0x155": "filterNavs",
        "0xbfbc": "subwayNavs",
        "0xe51e": "distance",
        "0xcb27": "screeningList",
        "0x2da7": "queryId",
        "0x8788": "dealListType",
        "0xf71c": "recommendDeals",
        "0xb155": "events",
        "0x6107": "hotEvents",
        "0x12d": "selectedRegion",
        "0xfff4": "shopAggDeals",
        "0xf38d": "aggregationType",
        "0x177d": "recordCount",
        "0xaa64": "startIndex",
        "0xf0b": "isEnd",
        "0x5703": "nextStartIndex",
        "0xa465": "emptyMsg",
        "0x2d87": "queryID"
    },
    "0xe0e8": {
        "__name": "ShopAggDealGroup",
        "0x4f31": "shop",
        "0xa28a": "deals"
    },
    "0xfd9d": {
        "__name": "Cell",
        "0x91b": "uid",
        "0xd60b": "cellID",
        "0xa2f5": "cellType",
        "0x36e9": "title",
        "0x475e": "subTitle",
        "0x16a9": "imageUrl",
        "0xa7f4": "extra",
        "0x1d6d": "cellData"
    },
    "0xf71c": {
        "__name": "RecommendDeals",
        "0x4cd0": "recommendList",
        "0xf9b9": "recommendDescription"
    },
    "0x33af": {
        "__name": "NaviTag",
        "0xefc4": "tagName",
        "0x1105": "enName",
        "0x6c1": "options"
    },
    "0x27c3": {
        "__name": "Category",
        "0x9ef2": "isHotCategory",
        "0xb287": "schema",
        "0x91b": "uid",
        "0xee8f": "name",
        "0xba80": "parentID",
        "0xed0f": "favIcon",
        "0xe51e": "distance",
        "0x49bf": "searchPara",
        "0xe243": "highlight",
        "0x1105": "enName",
        "0x10db": "parentEnName",
        "0x630b": "count"
    },
    "0x82b9": {
        "__name": "Region",
        "0x91b": "uid",
        "0xee8f": "name",
        "0xba80": "parentID",
        "0x297e": "lat",
        "0x2b04": "lng",
        "0x5d5e": "firstChar",
        "0x1105": "enName",
        "0x10db": "parentEnName",
        "0x630b": "count",
        "0x6c43": "regionType"
    },
    "0x9eb3": {
        "__name": "Campaign",
        "0x91b": "uid",
        "0x36e9": "title",
        "0x57b6": "content",
        "0xcc06": "logoUrl",
        "0x4d4e": "url",
        "0xd589": "beginTime",
        "0x144": "endTime",
        "0x2820": "status"
    },
    "0xdc73": {
        "__name": "Promo",
        "0x91b": "uid",
        "0x26f8": "promoTitle",
        "0x18c5": "sMSText",
        "0x29b": "promoPhoto",
        "0x793e": "shopID",
        "0x2d83": "shopName",
        "0xd589": "beginTime",
        "0x144": "endTime",
        "0x477b": "tag",
        "0xf2bf": "downloadCount",
        "0xbe8a": "latitude",
        "0x562d": "longitude",
        "0xfac6": "downloadPhoto",
        "0xb58f": "shopIDs",
        "0x73ad": "flag",
        "0xc5b5": "price",
        "0xca0f": "relevantPass",
        "0x7291": "desc"
    },
    "0xca0f": {
        "__name": "RelevantPass",
        "0xdcb4": "serialNumber",
        "0xa8a2": "typeIdentifier"
    },
    "0x70ac": {
        "__name": "Deal",
        "0x46e7": "bookingInfoList",
        "0x1584": "isHotelBookable",
        "0xa667": "calendar",
        "0x7ad": "recommendReasons",
        "0xf046": "jumpFlag",
        "0x4229": "jumpUrl",
        "0xae40": "airHotelType",
        "0x533d": "dealChannel",
        "0x91b": "uid",
        "0x36e9": "title",
        "0xfbf": "contentTitle",
        "0x4a8a": "photo",
        "0x630b": "count",
        "0xc5b5": "price",
        "0x897e": "memo",
        "0xbe8a": "latitude",
        "0x562d": "longitude",
        "0x24d4": "shortTitle",
        "0x7be5": "bigPhoto",
        "0x7c03": "originalPrice",
        "0x9ea0": "categoryID",
        "0x7d9b": "regionID",
        "0x5795": "regionName",
        "0x2820": "status",
        "0xe854": "remainCount",
        "0xb58f": "shopIDs",
        "0xc6ca": "time",
        "0x83df": "detailPhotos",
        "0xa7f4": "extra",
        "0xff61": "dealID",
        "0xcd43": "discount",
        "0x5b7": "detailInfo",
        "0xa0af": "dealComments",
        "0x6ee6": "dealSelectList",
        "0x6fa3": "dealType",
        "0x1f2": "canUseBalance",
        "0x910e": "canUseDiscount",
        "0x8dfb": "regionList",
        "0xa5f3": "categoryList",
        "0x243e": "link",
        "0xb111": "dealSubType",
        "0x399d": "canRefund",
        "0xacd4": "buyLimit",
        "0x6b1f": "deliveryType",
        "0x2226": "hasReceipt",
        "0x2628": "buyMixCount",
        "0x7aed": "interested",
        "0xab09": "isLimitPerUser",
        "0xe8d0": "tuanRemindStatus",
        "0x477b": "tag",
        "0xd689": "isMemberCard",
        "0x6228": "productType",
        "0x1ccd": "structDetailInfo",
        "0x6bd4": "structExtra",
        "0x4343": "help",
        "0x24e2": "eventTags",
        "0x7cec": "expirationText",
        "0xf77a": "recommendReason",
        "0xa375": "eventList",
        "0xc5a5": "structedDetails",
        "0xed92": "reservation",
        "0x1f71": "dealTitle",
        "0x5084": "dealTitlePrefix",
        "0xd697": "totalReview",
        "0x694c": "totalReviewRecommend"
    },
    "0xed92": {
        "__name": "Reservation",
        "0x91b": "uid",
        "0x2820": "status",
        "0x69fa": "statusMemo",
        "0x63ee": "date",
        "0xee8f": "name",
        "0x60d9": "idCard",
        "0x7e79": "phoneNumber",
        "0x48f8": "touristNum",
        "0x3f7c": "receiptIds",
        "0x97ac": "orderId",
        "0xd8f2": "isRealName",
        "0xea79": "needIdCard",
        "0x48af": "beginDate",
        "0x9c6d": "endDate",
        "0x151f": "disableDates",
        "0x36e9": "title",
        "0x50b2": "receiptNum",
        "0xebc2": "canSendSms",
        "0xa7f4": "extra"
    },
    "0x8679": {
        "__name": "Event",
        "0xcd43": "discount",
        "0x91b": "uid",
        "0x477b": "tag",
        "0x24d4": "shortTitle",
        "0x372": "type",
        "0x3ca7": "color",
        "0x7291": "desc",
        "0x32de": "needLogin"
    },
    "0x5bf0": {
        "__name": "DealSelect",
        "0x6d9": "bookingDefaultInfo",
        "0x91b": "uid",
        "0x36e9": "title",
        "0xc5b5": "price",
        "0x630b": "count",
        "0x2820": "status",
        "0x6fa3": "dealType",
        "0x8d9a": "groupTitle"
    },
    "0x162": {
        "__name": "HotelBookingDefaultInfo",
        "0x5665": "tipsCannotCancel",
        "0x1f71": "dealTitle",
        "0x311c": "tipsCanCancel",
        "0xd7f0": "maxCoupon",
        "0x637e": "minCoupon",
        "0x188c": "minRoom",
        "0xb8b1": "cancelDaysLimit",
        "0xe3e3": "cancelTime",
        "0x75b8": "maxRoom",
        "0xf9c1": "defaultCheckout",
        "0x6536": "defaultCheckin"
    },
    "0x2ab7": {
        "__name": "DealComment",
        "0x1de1": "comment",
        "0x92e3": "userName",
        "0x8622": "userTitle",
        "0x8df6": "userId"
    },
    "0x5cbc": {
        "__name": "DealCalendar",
        "0x6deb": "dayDealList",
        "0x720d": "orderUrl",
        "0x2337": "orderSwitcher"
    },
    "0x243e": {
        "__name": "Link",
        "0x4d4e": "url",
        "0xee8f": "name"
    },
    "0xe77f": {
        "__name": "DayDeal",
        "0x63ee": "date",
        "0xc5b5": "price",
        "0x3f23": "remain",
        "0xff01": "dealId"
    },
    "0x9f4c": {
        "__name": "HotelDealGroupBookingInfo",
        "0x1ccd": "statusTitle",
        "0x2820": "status",
        "0x246": "statusList",
        "0x63ee": "date"
    },
    "0x88d2": {
        "__name": "HotelDealBookingStatus",
        "0x6d9": "bookingDefaultInfo",
        "0x1ccd": "statusTitle",
        "0x2820": "status",
        "0x1f71": "dealTitle",
        "0xff01": "dealId"
    },
    "0xb4fb": {
        "__name": "Delivery",
        "0x91b": "uid",
        "0x9da9": "receiver",
        "0x415": "phoneNo",
        "0x47ae": "province",
        "0xdab": "city",
        "0xc5cd": "county",
        "0x2d04": "address",
        "0xfe3c": "postCode",
        "0x2c33": "showAddress",
        "0x8d60": "isDefault",
        "0x897e": "memo"
    }
  };


DPApp.ready(function(){
  for(var id in args){
    (function(id){
      $(id).onclick = function(){
        Efte[id](args[id]);
      };

      // 外部参数：
      // token, 用户token
      // cityId, 城市
      // phoneno 用户电话号码（绑定手机的服务出问题了）

      // price 单价
      // count 份数
      // cx

      // 可选
      // deliveryid 配送地址id
      // deliverytype 配送时间
      // orderid 修改订单
      // memo 备注

      // discountid 渠道立减(立减id),
      // eventchannel 支付宝（）,
      // producttype 团购还是预订（团购是0，非团购是（业务会自己申请））,
      // usebalance 是否使用余额 1|0,
      // usehongbao 是否使用红包 1|0,
      // usepoint 是否使用积分 1|0



      // "token": user.token,
      // "cityid": cityId,
      // "count": 1,
      // "paymentamount": deal.price,
      // "deliveryid": "0",
      // "deliverytype": "1",
      // "orderid": "0",
      // "memo": "",
      // "cx": cx,
      // "ismembercard": "0"

      function series(steps, callback){
        var count = steps.length;
        var results = [];
        function done(err, result){
          if(err){
            return callback(err);
          }else{
            results.push(result);
            steps.count--;
            steps.shift();
            if(steps.length){
              steps[0](done);
            }else{
              callback(null, results);
            }
          }
        }
        steps[0](done);
      }

      function getBaseInfo(callback){
        var info = {};
        series([
          function(done){
            DPApp.getUserInfo({
              success: function(user){
                done(null, user);
              },
              fail: function(){
                done("fail get user");
              }
            });
          },
          function(done){
            DPApp.getCityId({
              success: function(result){
                done(null, result.cityId);
              },
              fail: function(){
                done("fail get cityId");
              }
            });
          }
        ], function(err, result){
          if(err){return callback(err);}
          callback(null, {
            user: result[0],
            cityId: result[1]
          });
        });
      }

      function getTuangouDeal(data, callback){
        DPApp.ajax({
          url: 'http://app.t.dianping.com/dealgn.bin',
          data: data,
          keys: [
            "Deal",
            "ID",
            "Price",
            "DealSelectList"
          ],
          success: function(deal) {
            callback(null , deal);
          },
          fail: function(){
            callback("fail get tuangou deal");
          }
        });
      }

      function loopQuery(data, callback){
        callback("fail loop query");
      }

      function createOrder(data, callback){
        DPApp.ajax({
          url: 'http://app.t.dianping.com/createordergn.bin',
          data: data,
          keys: [
            "PaymentInfo",
            "AdvanceOrderId",
            "RetryCount",
            "IntervalTime",
            "DiscountList",
            "Balance",
            "PaymentType",
            "ID",
            "Flag",
            "AlertMsg"
            ],
          success: function (paymentinfo) {
            if(paymentinfo.uid == 0){
              // 轮训
              loopQuery({}, callback);
            }else{
              callback(null, paymentinfo);
            }
          },
          fail: function (error) {
            callback("fail create order");
          }
        });
      }

      function payOrder(data, callback){
        DPApp.ajax({
          url: 'http://api.p.dianping.com/payorder.pay',
          data: data,
          success: function (paymsg) {
            callback(null, paymsg);
          },
          fail: function(fail){
            callback("fail payorder");
          }
        });
      }

      function getPaymentTool(payType){
        var PAY_TYPE_MINIALIPAY = 1;
        var PAY_TYPE_WEIXINPAY = 7;
        var PAYMENTTOOL_ALIPAY = "5:1:null#219#0";
        var PAYMENTTOOL_WEIXINPAY = "11:1:null#217#0";
        if (payType == PAY_TYPE_WEIXINPAY) {
          paymentTool = PAYMENTTOOL_WEIXINPAY;
        }else{
          paymentTool = PAYMENTTOOL_ALIPAY;
        }
        return paymentTool;
      }

      $('pay').onclick = function(){
        var payType = 7;
        var info, deal, order;
        var paymsg;
        series([
          function(done){
            getBaseInfo(function(err, result){
              if(err){return done(err);}
              info = result;
              done(null);
            });
          },
          function(done){
            getTuangouDeal({
              id: 6191069,
              cityid: info.cityId,
              token: info.user.token
            },function(err, result){
              if(err){return done(err);}
              deal = result;
              done(null);
            });
          },
          function(done){
            createOrder({
              groupid: deal.ID,
              dealid: deal.DealSelectList[0].ID,
              token: info.user.token,
              cityid: info.cityId,
              count: 1,
              paymentamount: deal.Price,
              cx: info.cx
            }, function(err, result){
              if(err){return done(err);}
              order = result;
              done(null);
            });
          },
          function(done){
            payOrder({
              token: info.user.token,
              orderid: order.uid,
              paymenttool: getPaymentTool(payType),
              cx: info.cx
            }, function(err, result){
              if(err){return done(err);}
              paymsg = result;
              done(null);
            });
          }
        ], function(err){
          if(err){
            return alert(err);
          }else{
            DPApp.pay({
              paytype: payType,
              paycontent: paymsg.content,
              success: function(data) {
                alert(JSON.stringify(data));
              },
              fail: function(data) {
                alert(JSON.stringify(data));
              }
            });
          }
        });
      }

      $('uploadImage').onclick = function(){

        var params = {
          sign: data.picSignature,
          nut: data.picToken
        };

        window.DPApp.uploadImage({
          uploadUrl: data.mapiUrl,
          maxNum: 9,
          extra: {
            uploadurl: data.groupPicUploadUrl,
            businessType: 'community',
            params: JSON.stringify(params)
          }
        }, uploadImageCallback);

      }

      $('ajax-json').onclick = function(){
        DPApp.ajax({
          url:"http://app.t.51ping.com/ajax/tuan/dealgn.json",
          data:{
            cityid:1,
            id:10713251
          },
          success: function(result){
            alert(JSON.stringify(result));
          },
          fail: function(){
            alert("调用失败");
          }

        });
      };

      $('getUA').onclick = function(){
        alert(JSON.stringify(DPApp.getUA()));
      };

      $('setSearchButton').onclick = function(){
        DPApp.setRRButton({
          icon:"H5_Search",
          handle: function(){
            DPApp.openScheme({
                url: "dianping://websearch",
                extra: {
                    "hotsuggesturl":"http://m.api.dianping.com/advancedsuggest.bin?cityid=1&mylat=31.215870&mylng=121.419100&myacc=0.000000",
                    "keywordurl":"http://m.api.dianping.com/advancedsuggest.bin?cityid=1&mylat=31.215870&mylng=121.419100&myacc=0.000000"
                }
            });
          }
        });
      };



      document.getElementById('callMulti').onclick = function(){
        DPApp.getUserInfo({success:success});
        DPApp.getLocation({success:success});
        DPApp.getNetworkType({success:success});
      }
    })(id);
  }

});

  window.onerror = function(a,b){
    // alert(a);
    // alert(b);
  }



  DPApp.did_handle_callback = DPApp.dequeue;

</script>
</body>

</html>
